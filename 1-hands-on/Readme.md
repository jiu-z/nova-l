# Getting Started with the Google Provider

## [Before you begin](https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/getting_started#before-you-begin)

- Create a project in the [Google Cloud Console](https://console.cloud.google.com/) and set up billing on that project. Any examples in this guide will be part of the [GCP "always free" tier](https://cloud.google.com/free/).
- [Install Terraform](https://learn.hashicorp.com/tutorials/terraform/install-cli?in=terraform/gcp-get-started) and read the Terraform getting started guide that follows. This guide will assume basic proficiency with Terraform - it is an introduction to the Google provider.



## [Configuring the Provider](https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/getting_started#configuring-the-provider)

First, authenticate with GCP.  The easiest way to do this is to run `gcloud auth application-default login`, if you already have gcloud installed.  If you don't already have it, you can install it from [here](https://cloud.google.com/sdk/docs/install).



## [Adding credentials](https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/getting_started#adding-credentials)

In order to make requests against the GCP API, you need to authenticate to prove that it's you making the request. The preferred method of provisioning resources with Terraform on your workstation is to use the Google Cloud SDK as we mentioned earlier.

You can also use a Google Cloud Service Account with terraform.

From [the service account key page in the Cloud Console](https://console.cloud.google.com/iam-admin/serviceaccounts) choose an existing account, or create a new one. Next, download the JSON key file. Name it something you can remember, and store it somewhere secure on your machine.

> *Note*: Currently the only supported service account credentials are credentials  downloaded from Cloud Console or generated by `gcloud`.

You supply the key to Terraform using the environment variable `GOOGLE_APPLICATION_CREDENTIALS`, setting the value to the location of the file.

```bash
export GOOGLE_APPLICATION_CREDENTIALS=/Users/andre/confidential/gcp/credential/pacific-ethos-388512-5976d546d56d.json
```

### [Using Terraform Cloud as the Backend](https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/getting_started#using-terraform-cloud-as-the-backend)

You need to use a different [environment variable](https://www.terraform.io/docs/cloud/workspaces/variables.html) name to store your credentials in Terraform Cloud.

1. Create an environment variable called `GOOGLE_CREDENTIALS` in your Terraform Cloud workspace.
2. Remove the newline characters from your JSON key file and then paste the credentials into the environment variable value field.
3. Mark the variable as **Sensitive** and click **Save variable**.

All runs within the workspace will use the `GOOGLE_CREDENTIALS` variable to authenticate with Google Cloud Platform.

## [Provisioning your resources](https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/getting_started#provisioning-your-resources)

By now, your config will look something like:

```hcl
provider "google" {
  project = "{{YOUR GCP PROJECT}}"
  region  = "us-central1"
  zone    = "us-central1-c"
}

resource "google_compute_instance" "vm_instance" {
  name         = "terraform-instance"
  machine_type = "e2-micro"

  boot_disk {
    initialize_params {
      image = "debian-cloud/debian-11"
    }
  }

  network_interface {
    # A default network is created for all GCP projects
    network = google_compute_network.vpc_network.self_link
    access_config {
    }
  }
}

resource "google_compute_network" "vpc_network" {
  name                    = "terraform-network"
  auto_create_subnetworks = "true"
}
```

With a Terraform config and with your credentials configured, it's time to provision your resources:



```hcl
terraform init
terraform plan
terraform apply  -auto-approve
terraform destroy -auto-approve
```